From 02c287968a92c4f5dd783c4b2135acba61bba318 Mon Sep 17 00:00:00 2001
From: Scott Ellis <scott@jumpnowtek.com>
Date: Sun, 2 Aug 2015 09:02:18 -0400
Subject: [PATCH] bbb-nh5cape: Fix bpp for 24-bit color

---
 arch/arm/boot/dts/bbb-nh5cape.dts | 62 +++++++++++++++++++--------------------
 1 file changed, 31 insertions(+), 31 deletions(-)

diff --git a/arch/arm/boot/dts/bbb-nh5cape.dts b/arch/arm/boot/dts/bbb-nh5cape.dts
index 7310ea5..cf9ad35 100644
--- a/arch/arm/boot/dts/bbb-nh5cape.dts
+++ b/arch/arm/boot/dts/bbb-nh5cape.dts
@@ -40,34 +40,34 @@
 &am33xx_pinmux {
 	lcd_pins: lcd_pins {
 		pinctrl-single,pins = <
-			0xa0 (PIN_OUTPUT | MUX_MODE0)            /* lcd_data0 */
-			0xa4 (PIN_OUTPUT | MUX_MODE0)            /* lcd_data1 */
-			0xa8 (PIN_OUTPUT | MUX_MODE0)            /* lcd_data2 */
-			0xac (PIN_OUTPUT | MUX_MODE0)            /* lcd_data3 */
-			0xb0 (PIN_OUTPUT | MUX_MODE0)            /* lcd_data4 */
-			0xb4 (PIN_OUTPUT | MUX_MODE0)            /* lcd_data5 */
-			0xb8 (PIN_OUTPUT | MUX_MODE0)            /* lcd_data6 */
-			0xbc (PIN_OUTPUT | MUX_MODE0)            /* lcd_data7 */
-			0xc0 (PIN_OUTPUT | MUX_MODE0)            /* lcd_data8 */
-			0xc4 (PIN_OUTPUT | MUX_MODE0)            /* lcd_data9 */
-			0xc8 (PIN_OUTPUT | MUX_MODE0)            /* lcd_data10 */
-			0xcc (PIN_OUTPUT | MUX_MODE0)            /* lcd_data11 */
-			0xd0 (PIN_OUTPUT | MUX_MODE0)            /* lcd_data12 */
-			0xd4 (PIN_OUTPUT | MUX_MODE0)            /* lcd_data13 */
-			0xd8 (PIN_OUTPUT | MUX_MODE0)            /* lcd_data14 */
-			0xdc (PIN_OUTPUT | MUX_MODE0)            /* lcd_data15 */
-			0x20 (PIN_OUTPUT | MUX_MODE1)            /* lcd_data16 */
-			0x24 (PIN_OUTPUT | MUX_MODE1)            /* lcd_data17 */
-			0x28 (PIN_OUTPUT | MUX_MODE1)            /* lcd_data18 */
-			0x2c (PIN_OUTPUT | MUX_MODE1)            /* lcd_data19 */
-			0x30 (PIN_OUTPUT | MUX_MODE1)            /* lcd_data20 */
-			0x34 (PIN_OUTPUT | MUX_MODE1)            /* lcd_data21 */
-			0x38 (PIN_OUTPUT | MUX_MODE1)            /* lcd_data22 */
-			0x3c (PIN_OUTPUT | MUX_MODE1)            /* lcd_data23 */
-			0xe0 (PIN_OUTPUT_PULLDOWN | MUX_MODE0)   /* lcd_vsync */
-			0xe4 (PIN_OUTPUT_PULLDOWN | MUX_MODE0)   /* lcd_hsync */
-			0xe8 (PIN_OUTPUT_PULLDOWN | MUX_MODE0)   /* lcd_pclk */
-			0xec (PIN_OUTPUT_PULLDOWN | MUX_MODE0)   /* lcd_ac_bias_en */
+			0xa0 (PIN_OUTPUT | MUX_MODE0)            /* P9.45, lcd_data0 */
+			0xa4 (PIN_OUTPUT | MUX_MODE0)            /* P9.46, lcd_data1 */
+			0xa8 (PIN_OUTPUT | MUX_MODE0)            /* P9.43, lcd_data2 */
+			0xac (PIN_OUTPUT | MUX_MODE0)            /* P9.44, lcd_data3 */
+			0xb0 (PIN_OUTPUT | MUX_MODE0)            /* P9.41, lcd_data4 */
+			0xb4 (PIN_OUTPUT | MUX_MODE0)            /* P9.42, lcd_data5 */
+			0xb8 (PIN_OUTPUT | MUX_MODE0)            /* P9.39, lcd_data6 */
+			0xbc (PIN_OUTPUT | MUX_MODE0)            /* P9.40, lcd_data7 */
+			0xc0 (PIN_OUTPUT | MUX_MODE0)            /* P9.37, lcd_data8 */
+			0xc4 (PIN_OUTPUT | MUX_MODE0)            /* P9.38, lcd_data9 */
+			0xc8 (PIN_OUTPUT | MUX_MODE0)            /* P9.36, lcd_data10 */
+			0xcc (PIN_OUTPUT | MUX_MODE0)            /* P9.34, lcd_data11 */
+			0xd0 (PIN_OUTPUT | MUX_MODE0)            /* P9.35, lcd_data12 */
+			0xd4 (PIN_OUTPUT | MUX_MODE0)            /* P9.33, lcd_data13 */
+			0xd8 (PIN_OUTPUT | MUX_MODE0)            /* P9.31, lcd_data14 */
+			0xdc (PIN_OUTPUT | MUX_MODE0)            /* P9.32, lcd_data15 */
+			0x20 (PIN_OUTPUT | MUX_MODE1)            /* P9.19, lcd_data23 */
+			0x24 (PIN_OUTPUT | MUX_MODE1)            /* P9.13, lcd_data22 */
+			0x28 (PIN_OUTPUT | MUX_MODE1)            /* P9.14, lcd_data21 */
+			0x2c (PIN_OUTPUT | MUX_MODE1)            /* P9.17, lcd_data20 */
+			0x30 (PIN_OUTPUT | MUX_MODE1)            /* P9.12, lcd_data19 */
+			0x34 (PIN_OUTPUT | MUX_MODE1)            /* P9.11, lcd_data18 */
+			0x38 (PIN_OUTPUT | MUX_MODE1)            /* P9.16, lcd_data17 */
+			0x3c (PIN_OUTPUT | MUX_MODE1)            /* P9.15, lcd_data16 */
+			0xe0 (PIN_OUTPUT_PULLDOWN | MUX_MODE0)   /* P9.27, lcd_vsync */
+			0xe4 (PIN_OUTPUT_PULLDOWN | MUX_MODE0)   /* P9.29, lcd_hsync */
+			0xe8 (PIN_OUTPUT_PULLDOWN | MUX_MODE0)   /* P9.28, lcd_pclk */
+			0xec (PIN_OUTPUT_PULLDOWN | MUX_MODE0)   /* P9.30, lcd_ac_bias_en */
 			/* LCD enable */
 			0x8c (PIN_OUTPUT_PULLUP | MUX_MODE7)     /* P8.19, gpio2[1] */
 		>;
@@ -93,13 +93,13 @@
 		label = "lcd";
 		pinctrl-names = "default";
 		pinctrl-0 = <&lcd_pins>;
-		enable-gpios = <&gpio2 1 GPIO_ACTIVE_HIGH>;
+		enable-gpios = <&gpio2 1 GPIO_ACTIVE_HIGH>; /* P8.19 */
 
 		panel-info {
 			ac-bias           = <255>;
 			ac-bias-intrpt    = <0>;
 			dma-burst-sz      = <16>;
-			bpp               = <24>;
+			bpp               = <32>;
 			fdd               = <0x80>;
 			sync-edge         = <0>;
 			sync-ctrl         = <0>;
@@ -142,7 +142,7 @@
 		pinctrl-0 = <&touchscreen_pins>;
 		reg = <0x38>;
 		interrupt-parent = <&gpio3>;
-		interrupts = <19 0>;
+		interrupts = <19 0>; /* P9.27 */
 		xmin = <0>;
 		xmax = <799>;
 		xfuzz = <0>;
-- 
2.1.4

