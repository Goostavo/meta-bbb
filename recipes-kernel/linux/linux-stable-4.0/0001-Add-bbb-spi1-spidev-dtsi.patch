From 6ca920d30ca9b86779dcc5cae79b0362c92a2239 Mon Sep 17 00:00:00 2001
From: Scott Ellis <scott@jumpnowtek.com>
Date: Wed, 3 Jun 2015 05:53:46 -0400
Subject: [PATCH 1/5] Add bbb-spi1-spidev dtsi

---
 arch/arm/boot/dts/bbb-spi1-spidev.dtsi | 35 ++++++++++++++++++++++++++++++++++
 1 file changed, 35 insertions(+)
 create mode 100644 arch/arm/boot/dts/bbb-spi1-spidev.dtsi

diff --git a/arch/arm/boot/dts/bbb-spi1-spidev.dtsi b/arch/arm/boot/dts/bbb-spi1-spidev.dtsi
new file mode 100644
index 0000000..5ab587b
--- /dev/null
+++ b/arch/arm/boot/dts/bbb-spi1-spidev.dtsi
@@ -0,0 +1,34 @@
+/*
+ * Copyright (C) 2015 Jumpnow Technologies, LLC - http://jumpnowtek.com
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+
+&am33xx_pinmux {
+	spi1_pins: spi1_pins {
+		pinctrl-single,pins = <
+			0x19c (PIN_OUTPUT_PULLUP | MUX_MODE3)  /* P9.28, spi1_cs0 */
+			0x194 (PIN_OUTPUT_PULLUP | MUX_MODE3)  /* P9.29, spi1_d0 */
+			0x198 (PIN_INPUT_PULLUP | MUX_MODE3)   /* P9.30, spi1_d1 */
+			0x190 (PIN_INPUT_PULLUP | MUX_MODE3)   /* P9.31, spi1_sclk */
+		>;
+	};
+};
+
+&spi1 {
+	status = "okay";
+	pinctrl-names = "default";
+	pinctrl-0 = <&spi1_pins>;
+	ti,pindir-d0-out-d1-in = <1>; /* d0 is MOSI, d1 is MISO */
+
+	spidev1: spi@0 {
+		compatible = "spidev";
+		reg = <0>;
+		spi-max-frequency = <12000000>;
+		/* spi-cpha; sets CPHA=1, default is CPHA=0 */
+		/* spi-cpol; sets CPOL=1, default is CPOL=0 */
+		/* spi-cs-high; default is spi cs low */
+	};
+};
-- 
2.1.4
